{% extends 'base.html' %}



{% block title %}{{movie.movie_name}}{% endblock title %}



{% block content %}


<div class="container">
    <div class="movie-cover">
        <img src="{{ movie.movie_images.url }}" alt="" class="w-100" style=" height:450px;">
        <div class="top-right text-light">
            <div class="container text-center bg-light rounded text-dark p-0 " style="width:90px;">
                <div class="d-flex mx-auto"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="darkyellow" class="bi bi-hand-thumbs-up-fill mt-2 mx-2" viewBox="0 0 16 16">
  <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
</svg>
                <div class="h3">{{rating}}<span class="fs-6">/5</span></div></div>
                <hr class="p-0 m-0">
                <div class="opacity-50 ">{{reviews_rating|length}}</div>
                
                
            </div>
        </div>
        <div class="movie-cover-overlap">

            <div class="row">
                <div class="col-3">

                    <div class="p-3 bg-light rounded-3 shadow-lg">
                        <img src="{{ movie.movie_poster.url }}" class="img-fluid rounded-3" alt="">
                        <div class="mx-2 mt-2">
                            <strong class="movie-info">Directors</strong>
                            <p class="movie-details">
                                {{movie.movie_director}}
                            </p>
                            <strong class="movie-info">Writers</strong>
                            <p class="movie-details">
                                {{movie.movie_writer}}
                            </p>
                            <strong class="movie-info">Casts</strong>
                            <p class="movie-details">

                                {{movie.movie_cast_string}}

                            </p>
                            <strong class="movie-info">Plot</strong>
                            <p class="movie-details">
                                {{movie.movie_plot}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-8 ms-3">
                    <div class="bg-light shadow-lg rounded-3 ps-3 pt-3 pb-3 mb-5">
                        <div class="d-flex justify-content-between">
                            <h2 class="fw-bolder">{{movie.movie_name}}
                                <span class="fw-lighter h3">{{movie.release_year}}</span>
                            </h2>
                            {% if user.is_staff %}
                            <div>
                                <button type="button" class="btn btn-light "><svg xmlns="http://www.w3.org/2000/svg"
                                        width="20" height="20" fill="currentColor" class="bi bi-pencil-square"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                        <path fill-rule="evenodd"
                                            d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                                    </svg></button>
                                <button type="button" class="btn btn-light me-3 text-danger" ><svg xmlns="http://www.w3.org/2000/svg"
                                        width="20" height="20" fill="currentColor" class="bi bi-trash"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z" />
                                        <path
                                            d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z" />
                                    </svg></button>
                                    
                            </div>{% endif %}
                        </div>

                        <p class="p-0 m-0 opacity-75">{{movie.movie_genre_string}}</p>
                        <hr class="my-3 me-3">
                        <div class="d-flex justify-content-between">
                            <div class="mt-3"><strong class="movie-info pb-3"> Budget </strong> -
                                <span class="text-bg-info p-2 rounded text-light fw-semibold"> $
                                    {{movie.movie_budget_string}}</span>
                            </div>
                            <span class="me-3">
                                <form action="{% url 'add_watchlist' movie.id %}" method="POST">
                                    {% csrf_token %}
                                    <button class="btn btn-danger pt-1"> {% if check %}Remove from Watchlist
                                        <strong>-</strong>{% else %}
                                        Add to
                                        Watchlist <strong>+</strong>{% endif %}<strong class="fw-bolder fs-4">
                                        </strong></button>
                                </form>
                            </span>
                        </div>
                    </div>
                    <div class="mt-5 bg-light rounded shadow">
                        <div class="container-fluid ps-4 pt-3">
                            <ul class="nav nav-underline" id="myTab" role="tablist">
                                <li class="nav-item " role="presentation">
                                    <button class="nav-link text-dark pb-3 active" id="review-tab" data-bs-toggle="tab"
                                        data-bs-target="#review-tab-pane" type="button" role="tab"
                                        aria-controls="review-tab-pane" aria-selected="true">Reviews</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="summary-tab" data-bs-toggle="tab"
                                        data-bs-target="#summary-tab-pane" type="button" role="tab"
                                        aria-controls="summary-tab-pane" aria-selected="false">Summary</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="cast-tab" data-bs-toggle="tab"
                                        data-bs-target="#cast-tab-pane" type="button" role="tab"
                                        aria-controls="cast-tab-pane" aria-selected="false">Cast</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="trailer-tab" data-bs-toggle="tab"
                                        data-bs-target="#trailer-tab-pane" type="button" role="tab"
                                        aria-controls="trailer-tab-pane" aria-selected="false">Trailers</button>
                                </li>

                            </ul>
                            <hr class="m-0 p-0">
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active pb-5 mb-5 me-3 pt-3" id="review-tab-pane"
                                    role="tabpanel" aria-labelledby="review-tab" tabindex="0">

                                    <div class="container-fluid">
                                        <div class="d-flex justify-content-between">
                                            <h4 class="align-top">Reviews</h4>
                                            <button type="button" class="btn btn-primary" data-bs-toggle="collapse"
                                                data-bs-target="#collapseExample" aria-expanded="false"
                                                aria-controls="collapseExample">Write a
                                                Review</button>
                                        </div>
                                        <div class="collapse" id="collapseExample">
                                            <hr>
                                            <h2 class="fs-5 opacity-75">Leave a Review</h2>
                                            <form action="{% url 'add_review' movie.id %}" method="POST">
                                                {% csrf_token %}
                                                {{rate_review_form}}
                                                <button type="submit" class="btn btn-primary mt-3"
                                                    style="width: 100px;">Submit</button>

                                            </form>
                                        </div>
                                        <hr>
                                        <div class="review">
                                            <div class="row">
                                                {% if reviews_rating %}
                                                {% for review in reviews_rating %}

                                                <div class="col-2">{% load static %}
                                                    <div class="container m-auto pt-3"><img
                                                            src="{% static 'images/icons8-user-100.png' %}" width="70px"
                                                            height="70px" alt="" class="border rounded-circle"></div>
                                                </div>
                                                <div class="col-10">
                                                    <div class="d-flex justify-content-between position-static">
                                                        <strong class="fs-5 ">{{review.viewer.first_name}}
                                                            {{review.viewer.last_name}}</strong>
                                                        <div class="d-inline position-static">
                                                            <div class="blank-stars">{% for i in review.return_list %}<svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                                    height="16" fill="currentColor"
                                                                    class="bi bi-star-fill text-warning"
                                                                    viewBox="0 0 16 16">
                                                                    <path
                                                                        d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                                                </svg>

                                                                {% endfor %}
                                                            </div>
                                                            <div class="filled-stars">{% for i in review.length %}

                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                                    height="16" fill="currentColor"
                                                                    class="bi bi-star text-warning" viewBox="0 0 16 16">
                                                                    <path
                                                                        d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                                                                </svg>

                                                                {% endfor %}
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <p class="opacity-75 movie-details mt-2">{{review.review}}</p>
                                                </div>


                                                {% endfor %}
                                                {% else %}
                                                <div class="text-center opacity-50">No Reviews</div>
                                                {% endif %}
                                            </div>
                                        </div>

                                    </div>

                                </div>



                                <div class="tab-pane fade opacity-50 mb-5 py-5" id="summary-tab-pane" role="tabpanel"
                                    aria-labelledby="summary-tab" tabindex="0">Summary <br>Four high
                                    school kids
                                    discover an old video game console and are drawn into the game's jungle setting,
                                    literally becoming the adult avatars they chose. What they discover is that you
                                    don't just play Jumanji - you must survive it. To beat the game and return to the
                                    real world, they'll have to go on the most dangerous adventure of their lives,
                                    discover what Alan Parrish left 20 years ago, and change the way they think about
                                    themselves - or they'll be stuck in the game forever.</div>
                                <div class="tab-pane pb-5 mb-5 me-3 pt-3 fade" id="cast-tab-pane" role="tabpanel"
                                    aria-labelledby="cast-tab" tabindex="0">
                                    <div>
                                        <h4>Cast</h4>
                                        {% if cast %}
                                        <div class="list-group">
                                            <div class="row">
                                                {% for person in cast %}
                                                <div class="col-6">
                                                    <a href="{% url 'selected_actor' person.id %}"
                                                        class="list-group-item text-decoration-none bg-light d-flex border-0 align-content-center">
                                                        <div class=""><img src="{{ person.actors_images.url }}"
                                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                                alt="{{person.actors_name}}"></div>
                                                        <div class="mt-2 ms-3 cast opacity-50">{{ person.actors_name }}
                                                        </div>
                                                    </a>
                                                </div>
                                                {% endfor %}


                                            </div>
                                        </div>
                                        {% else %}
                                        <div class="opacity-50">Cast Not Found</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="trailer-tab-pane" role="tabpanel"
                                    aria-labelledby="trailer-tab" tabindex="0">

                                <div class="container pb-3">
                                    Trailers
                                    
                                    <div class="ratio ratio-16x9 me-2">
                                        <iframe src="{{movie.youtube_search}}"
                                            title="YouTube video" allowfullscreen></iframe>
                                    </div>
                                </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>
    </div>
</div>



{% if movie.movie_verified == False %}
<div class="text-center bg-dark container rounded">
    <div class="d-flex justify-content-between p-3"> 
        
            <button class="btn btn-danger btn-lg" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
            
       
        <form method="GET" action="{% url 'verify_movie' movie.id %}">
            {% csrf_token %}
            <button class="btn btn-primary btn-lg">Confirm Movie</button>
        </form>
       
    </div>

</div>{% endif %}

{% endblock content %}