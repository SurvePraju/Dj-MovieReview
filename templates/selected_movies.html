{% extends 'base.html' %}



{% block title %}{{movie.movie_name}}{% endblock title %}



{% block content %}


<div class="container">
    <div class="movie-cover" style="width:90vw;">
        <img src="{{ movie.movie_images.url }}" alt="" class="w-100" style=" height:450px;">
        <div class="movie-cover-overlap">

            <div class="row">
                <div class="col-3">

                    <div class="p-3 bg-light rounded-3 shadow-lg">
                        <img src="{{ movie.movie_poster.url }}" class="img-fluid rounded-3" alt="">
                        <div class="mx-2 mt-2">
                            <strong class="movie-info">Directors</strong>
                            <p class="movie-details">
                                {{movie.movie_director}}
                            </p>
                            <strong class="movie-info">Writers</strong>
                            <p class="movie-details">
                                {{movie.movie_writer}}
                            </p>
                            <strong class="movie-info">Casts</strong>
                            <p class="movie-details">

                                {{movie.movie_cast_string}}

                            </p>
                            <strong class="movie-info">Plot</strong>
                            <p class="movie-details">
                                {{movie.movie_plot}}
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-8 ms-3">
                    <div class="bg-light shadow-lg rounded-3 ps-3 pt-3 pb-3 mb-5">
                        <h2 class="fw-bolder">{{movie.movie_name}}
                            <span class="fw-lighter h3">{{movie.release_year}}</span>
                        </h2>

                        <p class="p-0 m-0 opacity-75">{{movie.movie_genre_string}}</p>
                        <hr class="my-3 me-3">
                        <div class="d-flex justify-content-between">
                            <div class="mt-3"><strong class="movie-info pb-3"> Budget </strong> -
                                <span class="text-bg-info p-2 rounded text-light fw-semibold"> $
                                    {{movie.movie_budget_string}}</span>
                            </div>
                            <span class="me-3">
                                <form action="{% url 'add_watchlist' movie.id %}" method="POST">
                                    {% csrf_token %}
                                    <button class="btn btn-danger pt-1"> {% if check %}Remove from Watchlist
                                        <strong>-</strong>{% else %}
                                        Add to
                                        Watchlist <strong>+</strong>{% endif %}<strong class="fw-bolder fs-4">
                                        </strong></button>
                                </form>
                            </span>
                        </div>
                    </div>
                    <div class="mt-5 bg-light rounded shadow">
                        <div class="container-fluid ps-4 pt-3">
                            <ul class="nav nav-underline" id="myTab" role="tablist">
                                <li class="nav-item " role="presentation">
                                    <button class="nav-link text-dark pb-3 active" id="review-tab" data-bs-toggle="tab"
                                        data-bs-target="#review-tab-pane" type="button" role="tab"
                                        aria-controls="review-tab-pane" aria-selected="true">Reviews</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="summary-tab" data-bs-toggle="tab"
                                        data-bs-target="#summary-tab-pane" type="button" role="tab"
                                        aria-controls="summary-tab-pane" aria-selected="false">Summary</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="cast-tab" data-bs-toggle="tab"
                                        data-bs-target="#cast-tab-pane" type="button" role="tab"
                                        aria-controls="cast-tab-pane" aria-selected="false">Cast</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link text-dark pb-3" id="trailer-tab" data-bs-toggle="tab"
                                        data-bs-target="#trailer-tab-pane" type="button" role="tab"
                                        aria-controls="trailer-tab-pane" aria-selected="false">Trailers</button>
                                </li>

                            </ul>
                            <hr class="m-0 p-0">
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade show active pb-5 mb-5 me-3 pt-3" id="review-tab-pane"
                                    role="tabpanel" aria-labelledby="review-tab" tabindex="0">

                                    <div class="container-fluid">
                                        <div class="d-flex justify-content-between">
                                            <h4 class="align-top">Reviews</h4>
                                            <button type="button" class="btn btn-primary" data-bs-toggle="collapse"
                                                data-bs-target="#collapseExample" aria-expanded="false"
                                                aria-controls="collapseExample">Write a
                                                Review</button>
                                        </div>
                                        <div class="collapse" id="collapseExample">
                                            <hr>
                                            <h2 class="fs-5 opacity-75">Leave a Review</h2>
                                            <form action="{% url 'add_review' movie.id %}" method="POST">
                                                {% csrf_token %}
                                                {{rate_review_form}}
                                                <button type="submit" class="btn btn-primary mt-3"
                                                    style="width: 100px;">Submit</button>

                                            </form>
                                        </div>
                                        <hr>
                                        <div class="review">
                                            <div class="row">
                                            {% for review in reviews_rating %}
                                            
                                                <div class="col-2">{% load static %}
                                                    <div class="container m-auto pt-3"><img
                                                            src="{% static 'images/icons8-user-100.png' %}" width="70px"
                                                            height="70px" alt="" class="border rounded-circle"></div>
                                                </div>
                                                <div class="col-10">
                                                    <div class="d-flex justify-content-between position-static">
                                                        <strong
                                                            class="fs-5 ">{{review.viewer.first_name}}
                                                            {{review.viewer.last_name}}</strong>
                                                        <div class="d-inline position-static">
                                                            <div class="blank-stars">{% for i in review.return_list %}<svg
                                                                xmlns="http://www.w3.org/2000/svg" width="16"
                                                                height="16" fill="currentColor"
                                                                class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
                                                                <path
                                                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                                                            </svg>

                                                            {% endfor %}
                                                        </div>
                                                            <div class="filled-stars">{% for i in review.length %}

                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                                    height="16" fill="currentColor"
                                                                    class="bi bi-star text-warning"
                                                                    viewBox="0 0 16 16">
                                                                    <path
                                                                        d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z" />
                                                                </svg>

                                                                {% endfor %}
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    <p class="opacity-75 movie-details mt-2">{{review.review}}</p>
                                                </div>
                                            

                                            {% endfor %}
                                        </div>
                                        </div>

                                    </div>

                                </div>
                            


                                <div class="tab-pane fade opacity-50 mb-5 py-5" id="summary-tab-pane" role="tabpanel"
                                    aria-labelledby="summary-tab" tabindex="0">Summary <br>Four high
                                    school kids
                                    discover an old video game console and are drawn into the game's jungle setting,
                                    literally becoming the adult avatars they chose. What they discover is that you
                                    don't just play Jumanji - you must survive it. To beat the game and return to the
                                    real world, they'll have to go on the most dangerous adventure of their lives,
                                    discover what Alan Parrish left 20 years ago, and change the way they think about
                                    themselves - or they'll be stuck in the game forever.</div>
                                <div class="tab-pane pb-5 mb-5 me-3 pt-3 fade" id="cast-tab-pane" role="tabpanel"
                                    aria-labelledby="cast-tab" tabindex="0">
                                    <div>
                                        <h4>Cast</h4>
                                        {% if cast %}
                                        <div class="list-group">
                                            <div class="row">
                                                {% for person in cast %}
                                                <div class="col-6">
                                                    <a href="{% url 'selected_actor' person.id %}"
                                                        class="list-group-item text-decoration-none bg-light d-flex border-0 align-content-center">
                                                        <div class=""><img src="{{ person.actors_images.url }}"
                                                                style="height: 50px; width: 50px; border-radius: 50%;"
                                                                alt="{{person.actors_name}}"></div>
                                                        <div class="mt-2 ms-3 cast opacity-50">{{ person.actors_name }}
                                                        </div>
                                                    </a>
                                                </div>
                                                {% endfor %}


                                            </div>
                                        </div>
                                        {% else %}
                                        <div class="opacity-50">Cast Not Found</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="trailer-tab-pane" role="tabpanel"
                                    aria-labelledby="trailer-tab" tabindex="0">Trailers
                                </div>
                            </div>
                        </div>
                    </div>


                </div>
            </div>

        </div>
    </div>
</div>





{% endblock content %}